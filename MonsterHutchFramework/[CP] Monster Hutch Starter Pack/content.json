{
    "Format": "2.4.0",
    "$schema": "https://smapi.io/schemas/content-patcher.json",
    "Changes": [
        {
            "Action": "Load",
            "Target": "Mods/{{ModId}}/Rings, Mods/{{ModId}}/MoreRings, Characters/Monsters/Rock Crab_iron, Characters/Monsters/Rock Crab_copper",
            "FromFile": "assets/{{TargetWithoutPath}}.png"
        },
        {
            "Action": "EditData",
            "Target": "juminos.MonsterHutchFramework/MonsterHutchData",
            "Entries": {
                "{{ModId}}_DustSprite": {
                    "MonsterType": "Dust Spirit",
                    "Name": "Dust Sprite",
                    "Sound": "dustMeep",
                    "Drops": [
                        "(O)382"
                    ],
                    "SpeedOverride": 1,
                    "FarmerCollision": false,
                    "MoveTowardPlayerThresholdOverride": 2,
                    "TexturePath": null,
                    "NumberWatered": 5,
                    "ProduceChance": "1f",
                    "DeluxeChance": "0.33f",
                    "ProduceData": [
                        {
                            "Id": "Coffee",
                            "ItemId": "(O)395",
                            "Count": 1,
                            "IsDropped": false,
                            "Weight": 1
                        }
                    ],
                    "DeluxeProduce": [
                        {
                            "Id": "TripleShot",
                            "ItemId": "(O)253",
                            "Count": 1,
                            "IsDropped": false,
                            "Weight": 1
                        }
                    ],
                    "InputItemId": "(O)382",
                    "InputItemCount": 10,
                    "IncubationTime": 2,
                    "CharmerRingId": "{{ModId}}_Dust"
                },
                "{{ModId}}_Spider": {
                    "MonsterType": "Spider",
                    "Name": "Spider",
                    "Sound": "batFlap",
                    "Drops": [
                        "(O)684"
                    ],
                    "SpeedOverride": 1,
                    "FarmerCollision": false,
                    "MoveTowardPlayerThresholdOverride": 2,
                    "TexturePath": null,
                    "NumberWatered": 5,
                    "ProduceChance": "1f",
                    "DeluxeChance": "0.33f",
                    "ProduceData": [
                        {
                            "Id": "BugMeat",
                            "ItemId": "(O)684",
                            "Count": 1,
                            "IsDropped": false,
                            "Weight": 1
                        }
                    ],
                    "DeluxeProduce": [
                        {
                            "Id": "VoidEssence",
                            "ItemId": "(O)769",
                            "Count": 1,
                            "IsDropped": false,
                            "Weight": 1
                        }
                    ],
                    "InputItemId": "(O)684",
                    "InputItemCount": 10,
                    "IncubationTime": 2,
                    "CharmerRingId": "{{ModId}}_Spider"
                }
            }
        },

        // Add rings
        {
            "Action": "EditData",
            "Target": "Data/Objects",
            "Entries": {
                "{{ModId}}_Shadow": {
                    "Name": "Shadow Ring",
                    "DisplayName": "{{i18n:shadow-ring.name}}",
                    "Description": "{{i18n:shadow-ring.description}}",
                    "Type": "Ring",
                    "Category": -96,
                    "Price": 1500,
                    "Texture": "Mods/{{ModId}}/MoreRings",
                    "SpriteIndex": 0,
                    "Edibility": -300,
                    "ExcludeFromRandomSale": true,
                    "ContextTags": [
                        "color_black",
                        "ring_item"
                    ]
                },
                "{{ModId}}_Spider": {
                    "Name": "Spider Ring",
                    "DisplayName": "{{i18n:spider-ring.name}}",
                    "Description": "{{i18n:spider-ring.description}}",
                    "Type": "Ring",
                    "Category": -96,
                    "Price": 1500,
                    "Texture": "Mods/{{ModId}}/MoreRings",
                    "SpriteIndex": 1,
                    "Edibility": -300,
                    "ExcludeFromRandomSale": true,
                    "ContextTags": [
                        "color_blue",
                        "ring_item"
                    ]
                },
                "{{ModId}}_Dust": {
                    "Name": "Dust Sprite Ring",
                    "DisplayName": "{{i18n:dustsprite-ring.name}}",
                    "Description": "{{i18n:dustsprite-ring.description}}",
                    "Type": "Ring",
                    "Category": -96,
                    "Price": 1500,
                    "Texture": "Mods/{{ModId}}/MoreRings",
                    "SpriteIndex": 2,
                    "Edibility": -300,
                    "ExcludeFromRandomSale": true,
                    "ContextTags": [
                        "color_black",
                        "ring_item"
                    ]
                },
                "{{ModId}}_Bat": {
                    "Name": "Bat Ring",
                    "DisplayName": "{{i18n:bat-ring.name}}",
                    "Description": "{{i18n:bat-ring.description}}",
                    "Type": "Ring",
                    "Category": -96,
                    "Price": 1500,
                    "Texture": "Mods/{{ModId}}/MoreRings",
                    "SpriteIndex": 4,
                    "Edibility": -300,
                    "ExcludeFromRandomSale": true,
                    "ContextTags": [
                        "color_black",
                        "ring_item"
                    ]
                },
                "{{ModId}}_MagmaSprite": {
                    "Name": "Magma Ring",
                    "DisplayName": "{{i18n:magmasprite-ring.name}}",
                    "Description": "{{i18n:magmasprite-ring.description}}",
                    "Type": "Ring",
                    "Category": -96,
                    "Price": 1500,
                    "Texture": "Mods/{{ModId}}/MoreRings",
                    "SpriteIndex": 5,
                    "Edibility": -300,
                    "ExcludeFromRandomSale": true,
                    "ContextTags": [
                        "color_orange",
                        "ring_item"
                    ]
                }
            }
        },
        // Add buffs
        {
            "Action": "EditData",
            "Target": "Data/Buffs",
            "Entries": {
                "{{ModId}}_SpiderBuff": {
                    "DisplayName": "{{i18n:spider-ring.name}}",
                    "Duration": -2,
                    "IconTexture": "TileSheets\\BuffsIcons",
                    "IconSpriteIndex": 8,
                    "Effects": { "Attack": 3 }
                }
            }
        },

        // Assign buffs to rings
        {
            "Action": "EditData",
            "Target": "spacechase0.SpaceCore/WearableData",
            "Entries": {
                "(O){{ModId}}_Spider": {
                    "BuffIdToApply": "{{ModId}}_SpiderBuff"
                }
            }
        },


        // Add mail
        {
            "Action": "EditData",
            "Target": "Data/Mail",
            "Entries": {
                "{{ModId}}_Shadow": "{{i18n:shadow-ring.letter}}",
                "{{ModId}}_DustSprite": "{{i18n:dustsprite-ring.letter}}"
            }
        },

        // Add trigger actions
        {
            "Action": "EditData",
            "Target": "Data/TriggerActions",
            "Entries": {
                "{{ModId}}_Krobus10Heart": {
                    "Id": "{{ModId}}_Krobus10Heart",
                    "Trigger": "DayEnding",
                    "Condition": "PLAYER_HEARTS Current Krobus 10",
                    "Action": "AddMail Current {{ModId}}_Shadow"
                },
                "{{ModId}}_JasDust": {
                    "Id": "{{ModId}}_JasDust",
                    "Trigger": "DayEnding",
                    "Condition": "PLAYER_HEARTS Current Jas 6, PLAYER_KILLED_MONSTERS Current \"Dust Spirit\" 500",
                    "Action": "AddMail Current {{ModId}}_DustSprite"
                }
            }
        },

        // Add rings to shops
        {
            "Action": "EditData",
            "Target": "Data/Shops",
            "TargetField": [ "VolcanoShop", "Items" ],
            "Entries": {
                "{{ModId}}_MagmaSprite": {
                    "Id": "{{ModId}}_MagmaSprite",
                    "ItemId": "{{ModId}}_MagmaSprite",
                    "Price": 15000,
                    "TradeItemId": "(O)848",
                    "TradeItemAmount": 50
                }
            }
        },
        {
            "Action": "EditData",
            "Target": "Data/Shops",
            "TargetField": [ "Dwarf", "Items" ],
            "Entries": {
                "{{ModId}}_Spider": {
                    "Id": "{{ModId}}_Spider",
                    "ItemId": "{{ModId}}_Spider",
                    "Condition": "PLAYER_HAS_ACHIEVEMENT Current 41",
                    "TradeItemId": "(O)122",
                    "TradeItemAmount": 2
                },
                "{{ModId}}_Bat": {
                    "Id": "{{ModId}}_Bat",
                    "ItemId": "{{ModId}}_Bat",
                    "Condition": "MINE_LOWEST_LEVEL_REACHED 120",
                    "TradeItemId": "(O)749",
                    "TradeItemAmount": 20
                }
            }
        }
    ]
}